<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stroke Clinical Tool</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;
        const { Calculator, Clock, Brain, AlertTriangle, FileText, CheckCircle } = lucide;

        const StrokeClinicalTool = () => {
          const [activeTab, setActiveTab] = useState('workflow');
          const [patientData, setPatientData] = useState({});
          const [nihssScore, setNihssScore] = useState(0);
          const [aspectsScore, setAspectsScore] = useState(10);
          const [gcsItems, setGcsItems] = useState({
            eye: 0,
            verbal: 0,
            motor: 0
          });
          const [ichScoreItems, setIchScoreItems] = useState({
            gcs34: false,
            gcs512: false,
            age80: false,
            volume30: false,
            ivh: false,
            infratentorial: false
          });
          const [abcd2Items, setAbcd2Items] = useState({
            age60: false,
            bp: false,
            unilateralWeakness: false,
            speechDisturbance: false,
            duration10: false,
            duration60: false,
            diabetes: false
          });
          const [chads2vascItems, setChads2vascItems] = useState({
            chf: false,
            hypertension: false,
            age75: false,
            diabetes: false,
            strokeTia: false,
            vascular: false,
            age65: false,
            female: false
          });
          const [ropeItems, setRopeItems] = useState({
            noHypertension: false,
            noDiabetes: false,
            noStrokeTia: false,
            nonsmoker: false,
            cortical: false,
            age: ''
          });
          const [strokeCodeForm, setStrokeCodeForm] = useState({
            age: '',
            sex: '',
            hx: '',
            sx: '',
            lkw: '',
            lkw_date: new Date().toISOString().split('T')[0],
            nihss: '',
            def: '',
            hct: '',
            cta: '',
            ctp: '',
            tnk: [],
            tnk_rec: '',
            evt_rec: '',
            rec_reason: ''
          });
          const [aspectsRegionState, setAspectsRegionState] = useState([
            { id: 'M1', name: 'M1 - Anterior MCA cortex', checked: true },
            { id: 'M2', name: 'M2 - MCA cortex lateral to insular ribbon', checked: true },
            { id: 'M3', name: 'M3 - Posterior MCA cortex', checked: true },
            { id: 'M4', name: 'M4 - Anterior MCA territory immediately superior to M1', checked: true },
            { id: 'M5', name: 'M5 - Lateral MCA territory immediately superior to M2', checked: true },
            { id: 'M6', name: 'M6 - Posterior MCA territory immediately superior to M3', checked: true },
            { id: 'IC', name: 'IC - Internal capsule', checked: true },
            { id: 'L', name: 'L - Lentiform nucleus', checked: true },
            { id: 'C', name: 'C - Caudate', checked: true },
            { id: 'I', name: 'I - Insular ribbon', checked: true }
          ]);

          // NIH Stroke Scale items
          const nihssItems = [
            { id: 'consciousness', name: '1a. Level of Consciousness', options: ['Alert (0)', 'Drowsy (1)', 'Stuporous (2)', 'Coma (3)'] },
            { id: 'loc_questions', name: '1b. LOC Questions', options: ['Both correct (0)', 'One correct (1)', 'Neither correct (2)'] },
            { id: 'loc_commands', name: '1c. LOC Commands', options: ['Obeys both correctly (0)', 'Obeys one correctly (1)', 'Neither correctly (2)'] },
            { id: 'best_gaze', name: '2. Best Gaze', options: ['Normal (0)', 'Partial gaze palsy (1)', 'Forced deviation (2)'] },
            { id: 'visual', name: '3. Visual', options: ['No visual loss (0)', 'Partial hemianopia (1)', 'Complete hemianopia (2)', 'Bilateral hemianopia (3)'] },
            { id: 'facial_palsy', name: '4. Facial Palsy', options: ['Normal (0)', 'Minor asymmetry (1)', 'Partial facial paralysis (2)', 'Complete facial paralysis (3)'] },
            { id: 'motor_arm_left', name: '5a. Motor Arm-Left', options: ['No drift (0)', 'Drift (1)', 'Some effort against gravity (2)', 'No effort against gravity (3)', 'No movement (4)'] },
            { id: 'motor_arm_right', name: '5b. Motor Arm-Right', options: ['No drift (0)', 'Drift (1)', 'Some effort against gravity (2)', 'No effort against gravity (3)', 'No movement (4)'] },
            { id: 'motor_leg_left', name: '6a. Motor Leg-Left', options: ['No drift (0)', 'Drift (1)', 'Some effort against gravity (2)', 'No effort against gravity (3)', 'No movement (4)'] },
            { id: 'motor_leg_right', name: '6b. Motor Leg-Right', options: ['No drift (0)', 'Drift (1)', 'Some effort against gravity (2)', 'No effort against gravity (3)', 'No movement (4)'] },
            { id: 'limb_ataxia', name: '7. Limb Ataxia', options: ['Absent (0)', 'Present in upper or lower (1)', 'Present in both (2)'] },
            { id: 'sensory', name: '8. Sensory', options: ['Normal (0)', 'Partial loss (1)', 'Dense loss (2)'] },
            { id: 'language', name: '9. Best Languageâ€ ', options: ['No aphasia (0)', 'Mild-moderate aphasia (1)', 'Severe aphasia (2)', 'Mute, global aphasia (3)'] },
            { id: 'dysarthria', name: '10. Dysarthriaâ€ ', options: ['Normal articulation (0)', 'Mild-moderate slurring (1)', 'Severe dysarthria (2)', 'Intubated/other (2)'] },
            { id: 'extinction', name: '11. Extinction and Inattention', options: ['No neglect (0)', 'Visual, tactile, auditory, spatial, or personal inattention (1)', 'Profound hemi-inattention (2)'] }
          ];

          // Calculate NIHSS score
          const calculateNIHSS = (responses) => {
            return Object.values(responses).reduce((total, response) => {
              const score = parseInt(response?.split('(')[1]?.split(')')[0] || 0);
              return total + score;
            }, 0);
          };

          // Calculate ASPECTS score
          const calculateASPECTS = (regions) => {
            return regions.filter(region => region.checked).length;
          };

          // Calculate GCS score
          const calculateGCS = (items) => {
            return parseInt(items.eye || 0) + parseInt(items.verbal || 0) + parseInt(items.motor || 0);
          };

          // Calculate ICH score
          const calculateICHScore = (items) => {
            let score = 0;
            if (items.gcs34) score += 2;
            if (items.gcs512) score += 1;
            if (items.age80) score += 1;
            if (items.volume30) score += 1;
            if (items.ivh) score += 1;
            if (items.infratentorial) score += 1;
            return score;
          };

          // Calculate ABCD2 score
          const calculateABCD2Score = (items) => {
            let score = 0;
            if (items.age60) score += 1;
            if (items.bp) score += 1;
            if (items.unilateralWeakness) score += 2;
            if (items.speechDisturbance) score += 1;
            if (items.duration10) score += 1;
            if (items.duration60) score += 2;
            if (items.diabetes) score += 1;
            return score;
          };

          // Calculate CHADS2-VASc score
          const calculateCHADS2VascScore = (items) => {
            let score = 0;
            if (items.chf) score += 1;
            if (items.hypertension) score += 1;
            if (items.age75) score += 2;
            if (items.diabetes) score += 1;
            if (items.strokeTia) score += 2;
            if (items.vascular) score += 1;
            if (items.age65) score += 1;
            if (items.female) score += 1;
            return score;
          };

          // Calculate ROPE score
          const calculateROPEScore = (items) => {
            let score = 0;
            if (items.noHypertension) score += 1;
            if (items.noDiabetes) score += 1;
            if (items.noStrokeTia) score += 1;
            if (items.nonsmoker) score += 1;
            if (items.cortical) score += 1;
            
            // Age points
            const age = parseInt(items.age) || 0;
            if (age >= 18 && age <= 29) score += 5;
            else if (age >= 30 && age <= 39) score += 4;
            else if (age >= 40 && age <= 49) score += 3;
            else if (age >= 50 && age <= 59) score += 2;
            else if (age >= 60 && age <= 69) score += 1;
            // 70+ years gets 0 points
            
            return score;
          };

          // Create Icon component wrapper
          const Icon = ({ icon: IconComponent, size = 16 }) => {
            React.useEffect(() => {
              lucide.createIcons();
            }, []);
            
            return <i data-lucide={IconComponent} className="w-4 h-4 inline-block"></i>;
          };

          return (
            <div className="max-w-7xl mx-auto p-6 bg-white">
              {/* Header */}
              <div className="mb-6">
                <h1 className="text-3xl font-bold text-blue-900 mb-2">Stroke</h1>
              </div>

              {/* Navigation Tabs */}
              <div className="border-b border-gray-200 mb-6">
                <nav className="flex space-x-8 overflow-x-auto">
                  {[
                    { id: 'workflow', name: 'Acute Stroke Workflow', icon: 'check-circle' },
                    { id: 'nihss', name: 'NIH Stroke Scale', icon: 'brain' },
                    { id: 'imaging', name: 'Imaging & ASPECTS', icon: 'file-text' },
                    { id: 'lytic', name: 'Lytic Eligibility', icon: 'alert-triangle' },
                    { id: 'evt', name: 'EVT Eligibility', icon: 'alert-triangle' },
                    { id: 'strokecode', name: 'Stroke Code - Pulsara Summary', icon: 'file-text' },
                    { id: 'ich', name: 'ICH', icon: 'alert-triangle' },
                    { id: 'trials', name: 'Trials', icon: 'file-text' },
                    { id: 'calculators', name: 'Risk Calculators', icon: 'calculator' },
                    { id: 'protocols', name: 'Management', icon: 'file-text' }
                  ].map(tab => {
                    return (
                      <button
                        key={tab.id}
                        onClick={() => setActiveTab(tab.id)}
                        className={`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 whitespace-nowrap ${
                          activeTab === tab.id
                            ? 'border-blue-500 text-blue-600'
                            : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                        }`}
                      >
                        <i data-lucide={tab.icon} className="w-4 h-4"></i>
                        <span>{tab.name}</span>
                      </button>
                    );
                  })}
                </nav>
              </div>

              {/* Content */}
              <div className="space-y-6">
                {/* Workflow */}
                {activeTab === 'workflow' && (
                  <div className="space-y-6">
                    <div className="bg-red-50 border border-red-200 rounded-lg p-4">
                      <h2 className="text-xl font-semibold text-red-800 mb-4">âš¡ Acute Stroke Workflow</h2>
                      <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div className="bg-white p-4 rounded border">
                          <h3 className="font-semibold text-red-700 mb-2">Assessment</h3>
                          <ul className="text-sm space-y-1">
                            <li>â€¢ Age, PMH/Meds</li>
                            <li>â€¢ Sx</li>
                            <li>â€¢ LKN</li>
                            <li>â€¢ Presenting & Current BP</li>
                            <li>â€¢ NIHSS (& disabling focal deficits)</li>
                          </ul>
                        </div>
                        <div className="bg-white p-4 rounded border">
                          <h3 className="font-semibold text-red-700 mb-2">Imaging</h3>
                          <ul className="text-sm space-y-1">
                            <li>â€¢ HCT</li>
                            <li>â€¢ CTA H/N</li>
                          </ul>
                        </div>
                        <div className="bg-white p-4 rounded border">
                          <h3 className="font-semibold text-red-700 mb-2">Labs</h3>
                          <ul className="text-sm space-y-1">
                            <li>â€¢ BG</li>
                            <li>â€¢ ESP</li>
                            <li>â€¢ CBC/Coags/BMP</li>
                          </ul>
                        </div>
                        <div className="bg-white p-4 rounded border">
                          <h3 className="font-semibold text-red-700 mb-2">Tx</h3>
                          <ul className="text-sm space-y-1">
                            <li>â€¢ Obtain consent (when able)</li>
                            <li>â€¢ Safety Pause for TNK</li>
                          </ul>
                        </div>
                      </div>
                      
                      {/* TNK Risk/Benefit Discussion */}
                      <div className="bg-purple-50 border border-purple-200 rounded-lg p-4 mt-4">
                        <h3 className="text-lg font-semibold text-purple-800 mb-3">TNK Risk/Benefit Discussion</h3>
                        <p className="text-sm text-gray-700">We recommend a medication called Tenecteplase (TNK), which is a "clot-buster" drug. TNK reduces the risk of being disabled; people who get TNK have an improved chance of recovering without disability than people who don't get the medication. All medications have risks â€“ the main risk is bleeding, up to 4% of people develop bleeding in the brain that leads to new symptoms. Very rarely, people have an allergic reaction. The potential benefits are thought to be higher than the potential risks and we recommend TNK is administered. Time is very important here - the sooner the treatment is started, the higher the likelihood of benefit.</p>
                      </div>
                      
                      {/* Telestroke Section */}
                      <div className="bg-gray-50 border border-gray-300 rounded-lg p-4 mt-4">
                        <h3 className="text-lg font-semibold text-gray-800 mb-4">Telestroke</h3>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                          {/* OSH Transfer */}
                          <div className="bg-white p-3 rounded border">
                            <h4 className="font-semibold text-gray-700 mb-2">OSH Transfer:</h4>
                            <ul className="text-sm space-y-1">
                              <li>â€¢ BP treatment target</li>
                              <li>â€¢ AP tx (IS)</li>
                              <li>â€¢ Type of transport</li>
                              <li>â€¢ ETA</li>
                              <li>â€¢ Inform ER/NCCS about acute medical complications or comorbidities, intubation, hemodynamic instability, continuous infusions, and imaging planned on arrival</li>
                            </ul>
                          </div>
                          
                          {/* MT risk/benefit discussion */}
                          <div className="bg-white p-3 rounded border">
                            <h4 className="font-semibold text-gray-700 mb-2">MT risk/benefit discussion:</h4>
                            <p className="text-sm">Given the presence of a large vascular occlusion, disabling neurological symptoms, and no evident contraindications - the patient will be transferred to HMC for mechanical thrombectomy consideration. Potential benefits, potential risks, and alternatives to treatment were discussed with the OSH provider and patient/family; the neuro-IR team at HMC will obtain informed consent from the patient/family.</p>
                          </div>
                        </div>
                        
                        {/* Combined TNK documentation and recommendations */}
                        <div className="bg-white p-3 rounded border">
                          <h4 className="font-semibold text-gray-700 mb-2">TNK risk/benefit discussion documentation:</h4>
                          <p className="text-sm mb-4">After ensuring that there were no evident contraindications, TNK administration was recommended. Potential benefits, potential risks (including a potential risk of sx ICH of up to 4%), and alternatives to treatment were discussed with the OSH provider and patient/family prior to initiating treatment.</p>
                          
                          <h4 className="font-semibold text-gray-700 mb-2">Post-IV TNK/tPA recommendations:</h4>
                          <ul className="text-sm space-y-1">
                            <li>â€¢ Admit to ICU</li>
                            <li>â€¢ q1hour neurochecks and VS monitoring</li>
                            <li>â€¢ NO antithrombotics/anticoagulants for 24 hour after IV-TNK</li>
                            <li>â€¢ Maintain BP&lt;180/105 for 24 hours after IV-TNK</li>
                            <li>â€¢ HCT 24 hours post-TNK administration</li>
                            <li>â€¢ MRI Brain with diffusion weighted imaging</li>
                            <li>â€¢ EKG/telemetry</li>
                            <li>â€¢ Transthoracic echocardiogram</li>
                            <li>â€¢ Fasting lipid panel, HgA1c</li>
                            <li>â€¢ PT/OT/SLP evaluations</li>
                          </ul>
                        </div>
                      </div>
                    </div>

                    {/* Emergency Contacts */}
                    <div className="bg-red-50 border border-red-200 rounded-lg p-4">
                      <h3 className="text-lg font-semibold text-red-800 mb-3">ðŸš¨ Emergency Contacts</h3>
                      
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div className="bg-white p-3 rounded border">
                          <h4 className="font-semibold text-red-700 mb-2">Stroke Team</h4>
                          <ul className="text-sm space-y-1">
                            <li><strong>Stroke Phone:</strong> 206-744-6789</li>
                            <li><strong>STAT Pharmacy:</strong> 4-2241</li>
                            <li><strong>Neuroradiology:</strong> 4-8484</li>
                            <li><strong>Paging Operator:</strong> 4-0147</li>
                          </ul>
                        </div>
                        <div className="bg-white p-3 rounded border">
                          <h4 className="font-semibold text-green-700 mb-2">Imaging</h4>
                          <ul className="text-sm space-y-1">
                            <li><strong>Non-code STAT CT:</strong> 4-7290</li>
                            <li><strong>Non-code STAT MRI:</strong> 4-2460</li>
                            <li><strong>Angio Suites:</strong> 4-3381, 4-6506</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                )}

                {/* NIH Stroke Scale */}
                {activeTab === 'nihss' && (
                  <div className="space-y-6">
                    <div className="bg-gray-50 border border-gray-200 rounded-lg p-4">
                      <h2 className="text-xl font-semibold text-gray-800 mb-4">NIH Stroke Scale</h2>
                      <div className="text-right mb-4">
                        <span className="text-2xl font-bold text-blue-600">Total Score: {nihssScore}</span>
                      </div>
                      
                      <div className="space-y-4">
                        {nihssItems.map((item) => (
                          <div key={item.id} className="bg-white p-4 rounded border">
                            <h3 className="font-semibold mb-2">{item.name}</h3>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
                              {item.options.map((option, optionIndex) => (
                                <label key={optionIndex} className="flex items-center space-x-2 cursor-pointer">
                                  <input
                                    type="radio"
                                    name={item.id}
                                    value={option}
                                    onChange={(e) => {
                                      const newData = { ...patientData, [item.id]: e.target.value };
                                      setPatientData(newData);
                                      setNihssScore(calculateNIHSS(newData));
                                    }}
                                    className="text-blue-600"
                                  />
                                  <span className="text-sm">{option}</span>
                                </label>
                              ))}
                            </div>
                          </div>
                        ))}
                      </div>

                      <div className="mt-6 p-4 bg-blue-50 rounded border border-blue-200">
                        <h3 className="font-semibold text-blue-800 mb-2">Score Interpretation</h3>
                        <div className="text-sm space-y-1">
                          <p><strong>0:</strong> No stroke symptoms</p>
                          <p><strong>1-4:</strong> Minor stroke</p>
                          <p><strong>5-15:</strong> Moderate stroke</p>
                          <p><strong>16-20:</strong> Moderate to severe stroke</p>
                          <p><strong>21-42:</strong> Severe stroke</p>
                        </div>
                      </div>
                    </div>
                  </div>
                )}

                {/* Imaging & ASPECTS */}
                {activeTab === 'imaging' && (
                  <div className="space-y-6">
                    <div className="bg-gray-50 border border-gray-200 rounded-lg p-4">
                      <h2 className="text-xl font-semibold text-gray-800 mb-4">ASPECTS</h2>
                      <p className="text-xs text-gray-600 mb-3">Start at 10, subtract 1 for each abnormal region</p>
                      
                      <div className="text-right mb-4">
                        <span className="text-2xl font-bold text-blue-600">ASPECTS Score: {calculateASPECTS(aspectsRegionState)}</span>
                      </div>

                      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div className="space-y-3">
                          <h3 className="font-semibold">Brain Regions</h3>
                          {aspectsRegionState.map((region, index) => (
                            <label key={region.id} className="flex items-center space-x-2 cursor-pointer">
                              <input
                                type="checkbox"
                                checked={region.checked}
                                onChange={(e) => {
                                  const newRegions = [...aspectsRegionState];
                                  newRegions[index].checked = e.target.checked;
                                  setAspectsRegionState(newRegions);
                                }}
                                className="text-blue-600"
                              />
                              <span className="text-sm">{region.name}</span>
                            </label>
                          ))}
                        </div>
                      </div>
                    </div>

                    <div className="bg-purple-50 border border-purple-200 rounded-lg p-4">
                      <h3 className="text-lg font-semibold text-purple-800 mb-3">PC-ASPECTS</h3>
                      <p className="text-xs text-gray-600 mb-3">Start at 10. Thalami/cerebellar hemispheres = 1pt each, midbrain/pons = 2pts each</p>
                      <div className="grid grid-cols-2 md:grid-cols-3 gap-3 text-sm">
                        <div>â€¢ Thalami (1 point each)</div>
                        <div>â€¢ Occipital lobes (1 point each)</div>
                        <div>â€¢ Midbrain (2 points)</div>
                        <div>â€¢ Pons (2 points)</div>
                        <div>â€¢ Cerebellar hemispheres (1 point each)</div>
                      </div>
                    </div>
                  </div>
                )}

                {/* Lytic Eligibility */}
                {activeTab === 'lytic' && (
                  <div className="space-y-6">
                    <div className="bg-green-50 border border-green-200 rounded-lg p-4">
                      <h2 className="text-xl font-semibold text-green-800 mb-4">Lytic Eligibility</h2>
                      
                      {/* Inclusion Criteria */}
                      <div className="mb-6">
                        <h3 className="text-lg font-semibold text-green-700 mb-3">âœ“ Inclusion Criteria</h3>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                          <div className="bg-white p-3 rounded border">
                            <ul className="space-y-1">
                              <li>â€¢ Diagnosis of ischemic stroke causing measurable neurologic deficit</li>
                              <li>â€¢ Age â‰¥18 years</li>
                              <li>â€¢ Onset of symptoms &lt;3 hours (or &lt;4.5h with additional criteria)</li>
                            </ul>
                          </div>
                          <div className="bg-white p-3 rounded border">
                            <h4 className="font-semibold text-amber-700 mb-2">3-4.5h Window Additional Criteria:</h4>
                            <ul className="space-y-1 text-xs">
                              <li>â€¢ Age â‰¤80 years</li>
                              <li>â€¢ No history of both DM and prior stroke</li>
                              <li>â€¢ NIHSS â‰¤25</li>
                              <li>â€¢ No oral anticoagulant use</li>
                            </ul>
                          </div>
                          <div className="bg-white p-3 rounded border">
                            <h4 className="font-semibold text-teal-700 mb-2">WAKE-UP:</h4>
                            <ul className="space-y-1 text-xs">
                              <li>â€¢ LKN unclear (not awake/known to have had sx for 4.5 hours) + NO LVO</li>
                              <li>â€¢ MRI w/ DWI and T2/FLAIR</li>
                              <li>â€¢ Discuss â†“ certainty in benefit and â†‘ hemorrhage risk w/ thrombolysis</li>
                            </ul>
                          </div>
                        </div>
                      </div>

                      {/* Major Exclusions */}
                      <div className="mb-6">
                        <h3 className="text-lg font-semibold text-red-700 mb-3">âœ— Major Exclusion Criteria</h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <div className="bg-white p-3 rounded border">
                            <h4 className="font-semibold mb-2">Imaging Exclusions</h4>
                            <ul className="text-sm space-y-1">
                              <li>â€¢ CT with evidence of hemorrhage</li>
                              <li>â€¢ CT with extensive regions of clear hypoattenuation</li>
                              <li>â€¢ Ischemic injury &gt;1/3 of MCA territory</li>
                              <li>â€¢ Intra-axial, intracranial tumor (extra-axial tumors not absolute contraindication)</li>
                              <li>â€¢ Aortic arch dissection</li>
                            </ul>
                          </div>
                          <div className="bg-white p-3 rounded border">
                            <h4 className="font-semibold mb-2">Clinical Exclusions</h4>
                            <ul className="text-sm space-y-1">
                              <li>â€¢ Recent stroke (&lt;90 days)</li>
                              <li>â€¢ Recent severe head trauma (&lt;90 days)</li>
                              <li>â€¢ Recent intracranial/intraspinal surgery (&lt;90 days)</li>
                              <li>â€¢ Active internal bleeding</li>
                              <li>â€¢ GI malignancy</li>
                              <li>â€¢ Recent GI/urinary tract hemorrhage (&lt;21 days)</li>
                              <li>â€¢ Clinical presentation suggestive of SAH (even if HCT normal)</li>
                              <li>â€¢ Presentation consistent with infective endocarditis</li>
                            </ul>
                          </div>
                        </div>
                      </div>

                      {/* Lab/Vital Exclusions */}
                      <div className="mb-6">
                        <h3 className="text-lg font-semibold text-red-700 mb-3">Laboratory & Vital Sign Exclusions</h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <div className="bg-white p-3 rounded border">
                            <h4 className="font-semibold mb-2">Blood Pressure</h4>
                            <ul className="text-sm space-y-1">
                              <li>â€¢ SBP &gt;185 mmHg</li>
                              <li>â€¢ DBP &gt;110 mmHg</li>
                              <li>(Unresponsive to meds)</li>
                            </ul>
                          </div>
                          <div className="bg-white p-3 rounded border">
                            <h4 className="font-semibold mb-2">Laboratory & Anticoagulation</h4>
                            <ul className="text-sm space-y-1">
                              <li>â€¢ Platelet count &lt;100,000</li>
                              <li>â€¢ Blood glucose &lt;50 mg/dL</li>
                              <li>â€¢ Warfarin use with PT &gt;15s, INR &gt;1.7, or aPTT &gt;40s</li>
                              <li>â€¢ Recent DOAC use (&lt;48h)</li>
                              <li>â€¢ Treatment-dose heparin/LMWH (&lt;24 hours)</li>
                            </ul>
                          </div>
                        </div>
                      </div>

                      {/* Cautionary Criteria */}
                      <div className="mb-6">
                        <h3 className="text-lg font-semibold text-yellow-700 mb-3">âš  Cautionary Criteria</h3>
                        <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                          <p className="text-sm text-gray-700 mb-3">Consider risks/benefits and discuss with stroke team for:</p>
                          <ul className="text-sm space-y-1">
                            <li>â€¢ Prior known non-traumatic intracranial hemorrhage</li>
                            <li>â€¢ Vascular malformation unless severe neurological sx (ischemic risk outweighs ICH)</li>
                            <li>â€¢ Pregnancy; risk to fetus and woman unknownâ€”consult OB/GYN ASAP</li>
                            <li>â€¢ Major extra-cranial surgery or trauma within 14 days</li>
                            <li>â€¢ Acute or recent MI (within 3 months), depending on what type of MI</li>
                            <li>â€¢ Acute pericarditis</li>
                            <li>â€¢ Abnormal aPTT, TT, or anti-Xa activity with unknown use of direct thrombin inhibitor or factor Xa inhibitor (may be false positive due to lupus anticoagulant, consider lytic if able to reliably confirm pt is not taking one of these agents)</li>
                            <li>â€¢ Cerebral microbleeds: &gt;10 on prior MRI may increase risk for ICH</li>
                            <li>â€¢ Lecanemab or other Alzheimer's medications with potential risk of amyloid related imaging abnormalities are not recommended but confirm decision with stroke phone and prepare for potential MRI</li>
                          </ul>
                        </div>
                      </div>

                      {/* Dosing */}
                      <div className="bg-blue-100 p-4 rounded border border-blue-300">
                        <h3 className="text-lg font-semibold text-blue-800 mb-2">TNK Dosing</h3>
                        <p className="text-lg"><strong>0.25 mg/kg</strong> (maximum dose: 25 mg)</p>
                        <p className="text-sm text-blue-700 mt-2">Document safety pause: <code>.UWMSTROKESAFETYPAUSE</code></p>
                      </div>
                    </div>
                  </div>
                )}

                {/* EVT Eligibility */}
                {activeTab === 'evt' && (
                  <div className="space-y-6">
                    <div className="bg-purple-50 border border-purple-200 rounded-lg p-4">
                      <h2 className="text-xl font-semibold text-purple-800 mb-4">EVT Eligibility</h2>
                      
                      {/* Basilar Artery Occlusion */}
                      <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                        <h3 className="text-lg font-semibold text-blue-800 mb-3">Basilar Artery Occlusion</h3>
                        <ul className="text-sm space-y-1">
                          <li>â€¢ Last known well â‰¤24 hours</li>
                          <li>â€¢ NIHSS score â‰¥10</li>
                          <li>â€¢ pc-ASPECTS â‰¥6</li>
                        </ul>
                      </div>

                      {/* Anterior Circulation Large Vessel Occlusion */}
                      <div className="bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
                        <h3 className="text-lg font-semibold text-green-800 mb-4">Anterior Circulation Large Vessel Occlusion</h3>
                        
                        <div className="mb-4">
                          <p className="text-sm text-gray-700">â€¢ Trial evidence principally supports efficacy among adults â‰¥60 years of age, baseline mRS 0-1, NIHSSâ‰¥6 with disabling symptoms</p>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                          {/* Early Window */}
                          <div className="bg-white p-4 rounded border">
                            <h4 className="font-semibold text-green-700 mb-3">Early Window (0-6h)</h4>
                            <div className="mb-3">
                              <p className="text-sm font-semibold mb-1">ASPECTS 3-10:</p>
                              <p className="text-sm text-gray-600">â€¢ Generally eligible for EVT</p>
                            </div>
                            <div className="mb-3">
                              <p className="text-sm font-semibold mb-1">ASPECTS 0-2:</p>
                              <p className="text-sm text-gray-600">â€¢ Consider in very select cases</p>
                              <p className="text-sm text-gray-600">â€¢ Consider CTP to evaluate if estimated core volume is &lt;70-100cc</p>
                            </div>
                          </div>
                          
                          {/* Late Window */}
                          <div className="bg-white p-4 rounded border">
                            <h4 className="font-semibold text-purple-700 mb-3">Late Window (6-24h)</h4>
                            <div className="mb-3">
                              <p className="text-sm font-semibold mb-1">ASPECTS 6-10:</p>
                              <p className="text-sm text-gray-600">â€¢ Generally eligible for EVT</p>
                            </div>
                            <div className="mb-3">
                              <p className="text-sm font-semibold mb-1">ASPECTS 3-5:</p>
                              <p className="text-sm text-gray-600">â€¢ Generally eligible for EVT</p>
                              <p className="text-sm text-gray-600">â€¢ Consider CTP to evaluate if estimated core volume is â‰¤100cc + mismatch is present</p>
                            </div>
                            <div>
                              <p className="text-sm font-semibold mb-1">ASPECTS 0-2:</p>
                              <p className="text-sm text-gray-600">â€¢ EVT benefit is unclear</p>
                            </div>
                          </div>
                        </div>
                      </div>

                      {/* Medium Vessel Occlusion */}
                      <div className="bg-orange-50 border border-orange-200 rounded-lg p-4">
                        <h3 className="text-lg font-semibold text-orange-800 mb-3">Medium Vessel Occlusion</h3>
                        <ul className="text-sm space-y-1">
                          <li>â€¢ Consider in select cases of proximal or dominant M2 segment MCA occlusion within â‰¤1cm of bifurcation in horizontal segment when there is evidence of salvageable tissue + last known well is â‰¤24 hours</li>
                          <li>â€¢ Not recommended for M2-M4 MCA, ACA, and PCA occlusions</li>
                        </ul>
                      </div>
                    </div>
                  </div>
                )}

                {/* Stroke Code Form */}
                {activeTab === 'strokecode' && (
                  <div className="space-y-6">
                    <div className="bg-indigo-50 border border-indigo-200 rounded-lg p-4">
                      <h2 className="text-xl font-semibold text-indigo-800 mb-4">Stroke Code - Pulsara Summary Documentation</h2>
                      
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        {/* Left Column */}
                        <div className="space-y-4">
                          <div>
                            <label className="block text-sm font-medium text-gray-700 mb-1">Age</label>
                            <input
                              type="number"
                              className="w-full px-3 py-2 border border-gray-300 rounded-md"
                              value={strokeCodeForm.age}
                              onChange={(e) => setStrokeCodeForm({...strokeCodeForm, age: e.target.value})}
                              placeholder="Enter age"
                            />
                          </div>
                          
                          <div>
                            <label className="block text-sm font-medium text-gray-700 mb-1">Sex</label>
                            <select
                              className="w-full px-3 py-2 border border-gray-300 rounded-md"
                              value={strokeCodeForm.sex}
                              onChange={(e) => setStrokeCodeForm({...strokeCodeForm, sex: e.target.value})}
                            >
                              <option value="">Select...</option>
                              <option value="female">Female</option>
                              <option value="male">Male</option>
                            </select>
                          </div>
                          
                          <div>
                            <label className="block text-sm font-medium text-gray-700 mb-1">Past Medical History</label>
                            <input
                              type="text"
                              className="w-full px-3 py-2 border border-gray-300 rounded-md"
                              value={strokeCodeForm.hx}
                              onChange={(e) => setStrokeCodeForm({...strokeCodeForm, hx: e.target.value})}
                              placeholder="e.g., HTN, DM, CAD..."
                            />
                          </div>
                          
                          <div>
                            <label className="block text-sm font-medium text-gray-700 mb-1">Presenting Symptoms</label>
                            <input
                              type="text"
                              className="w-full px-3 py-2 border border-gray-300 rounded-md"
                              value={strokeCodeForm.sx}
                              onChange={(e) => setStrokeCodeForm({...strokeCodeForm, sx: e.target.value})}
                              placeholder="e.g., left sided weakness, aphasia..."
                            />
                          </div>
                          
                          <div>
                            <label className="block text-sm font-medium text-gray-700 mb-1">Last Known Well Time</label>
                            <input
                              type="text"
                              className="w-full px-3 py-2 border border-gray-300 rounded-md"
                              value={strokeCodeForm.lkw}
                              onChange={(e) => setStrokeCodeForm({...strokeCodeForm, lkw: e.target.value})}
                              placeholder="HH:MM AM/PM"
                            />
                          </div>
                          
                          <div>
                            <label className="block text-sm font-medium text-gray-700 mb-1">Last Known Well Date</label>
                            <input
                              type="date"
                              className="w-full px-3 py-2 border border-gray-300 rounded-md"
                              value={strokeCodeForm.lkw_date}
                              onChange={(e) => setStrokeCodeForm({...strokeCodeForm, lkw_date: e.target.value})}
                            />
                          </div>
                          
                          <div>
                            <label className="block text-sm font-medium text-gray-700 mb-1">NIHSS Score</label>
                            <input
                              type="number"
                              className="w-full px-3 py-2 border border-gray-300 rounded-md"
                              value={strokeCodeForm.nihss}
                              onChange={(e) => setStrokeCodeForm({...strokeCodeForm, nihss: e.target.value})}
                              placeholder="0-42"
                            />
                          </div>
                          
                          <div>
                            <label className="block text-sm font-medium text-gray-700 mb-1">Neurologic Deficit(s)</label>
                            <input
                              type="text"
                              className="w-full px-3 py-2 border border-gray-300 rounded-md"
                              value={strokeCodeForm.def}
                              onChange={(e) => setStrokeCodeForm({...strokeCodeForm, def: e.target.value})}
                              placeholder="Describe deficits..."
                            />
                          </div>
                        </div>
                        
                        {/* Right Column */}
                        <div className="space-y-4">
                          <div>
                            <label className="block text-sm font-medium text-gray-700 mb-1">Head CT Findings</label>
                            <textarea
                              className="w-full px-3 py-2 border border-gray-300 rounded-md"
                              rows="3"
                              value={strokeCodeForm.hct}
                              onChange={(e) => setStrokeCodeForm({...strokeCodeForm, hct: e.target.value})}
                              placeholder="e.g., no acute intracranial process..."
                            />
                          </div>
                          
                          <div>
                            <label className="block text-sm font-medium text-gray-700 mb-1">CTA Head/Neck Findings</label>
                            <textarea
                              className="w-full px-3 py-2 border border-gray-300 rounded-md"
                              rows="3"
                              value={strokeCodeForm.cta}
                              onChange={(e) => setStrokeCodeForm({...strokeCodeForm, cta: e.target.value})}
                              placeholder="e.g., right M1 occlusion..."
                            />
                          </div>
                          
                          <div>
                            <label className="block text-sm font-medium text-gray-700 mb-1">CTP Findings</label>
                            <textarea
                              className="w-full px-3 py-2 border border-gray-300 rounded-md"
                              rows="3"
                              value={strokeCodeForm.ctp}
                              onChange={(e) => setStrokeCodeForm({...strokeCodeForm, ctp: e.target.value})}
                              placeholder="e.g., core volume 20cc, penumbra 80cc..."
                            />
                          </div>
                          
                          <div>
                            <label className="block text-sm font-medium text-gray-700 mb-1">TNK Treatment</label>
                            <select
                              className="w-full px-3 py-2 border border-gray-300 rounded-md"
                              value={strokeCodeForm.tnk_rec}
                              onChange={(e) => setStrokeCodeForm({...strokeCodeForm, tnk_rec: e.target.value})}
                            >
                              <option value="">Select...</option>
                              <option value="Not Recommended">Not Recommended</option>
                              <option value="Recommended">Recommended</option>
                            </select>
                          </div>
                          
                          <div>
                            <label className="block text-sm font-medium text-gray-700 mb-1">EVT</label>
                            <select
                              className="w-full px-3 py-2 border border-gray-300 rounded-md"
                              value={strokeCodeForm.evt_rec}
                              onChange={(e) => setStrokeCodeForm({...strokeCodeForm, evt_rec: e.target.value})}
                            >
                              <option value="">Select...</option>
                              <option value="Not Recommended">Not Recommended</option>
                              <option value="Recommended">Recommended</option>
                            </select>
                          </div>
                          
                          <div>
                            <label className="block text-sm font-medium text-gray-700 mb-1">Rationale for Treatment Recommendation</label>
                            <textarea
                              className="w-full px-3 py-2 border border-gray-300 rounded-md"
                              rows="3"
                              value={strokeCodeForm.rec_reason}
                              onChange={(e) => setStrokeCodeForm({...strokeCodeForm, rec_reason: e.target.value})}
                              placeholder="Explain treatment decisions..."
                            />
                          </div>
                        </div>
                      </div>
                      
                      {/* TNK Contraindications */}
                      <div className="mb-6">
                        <label className="block text-sm font-medium text-gray-700 mb-2">TNK Contraindications</label>
                        <div className="bg-white p-4 rounded border border-gray-200">
                          <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                            {[
                              "ICH or Extensive Infarction on HCT",
                              "Ischemic Stroke (<3 months)",
                              "Head Trauma (<3 months)",
                              "Prior ICH",
                              "Intracranial (intra-axial) Neoplasm",
                              "Intracranial/Intraspinal Surgery (<3 months)",
                              "GI Malignancy",
                              "GI Hemorrhage (<3 weeks)",
                              "Suspected SAH, Aortic Dissection, or Infective Endocarditis",
                              "BP>185/110",
                              "Active Hemorrhage",
                              "Anticoagulant Use - Tx Dose LMWH (<24 hours), Direct Xa/Thrombin Inhibitor (<48h)",
                              "PLT<100K",
                              "INR>1.7 / PT>15s / PTT>40s",
                              "Glucose<50mg/dL"
                            ].map((item) => (
                              <label key={item} className="flex items-center space-x-2">
                                <input
                                  type="checkbox"
                                  className="text-indigo-600"
                                  checked={strokeCodeForm.tnk.includes(item)}
                                  onChange={(e) => {
                                    if (e.target.checked) {
                                      setStrokeCodeForm({...strokeCodeForm, tnk: [...strokeCodeForm.tnk, item]});
                                    } else {
                                      setStrokeCodeForm({...strokeCodeForm, tnk: strokeCodeForm.tnk.filter(i => i !== item)});
                                    }
                                  }}
                                />
                                <span className="text-sm">{item}</span>
                              </label>
                            ))}
                          </div>
                        </div>
                      </div>
                      
                      {/* Generated Summary */}
                      <div className="bg-white p-4 rounded border border-gray-200">
                        <h3 className="font-semibold text-gray-800 mb-2">Generated Summary:</h3>
                        <p className="text-sm text-gray-700 whitespace-pre-wrap">
                          {(() => {
                            const hx_str = strokeCodeForm.hx || "no PMH";
                            const tnk_str = strokeCodeForm.tnk.length > 0 ? `. TNK Contraindications: ${strokeCodeForm.tnk.join(", ")}` : "";
                            const ctp_str = strokeCodeForm.ctp || "N/A";
                            
                            return `${strokeCodeForm.age || "[Age]"} year old ${strokeCodeForm.sex || "[sex]"} with ${hx_str} who presents with ${strokeCodeForm.sx || "[symptoms]"}. Last known well is ${strokeCodeForm.lkw || "[time]"} ${strokeCodeForm.lkw_date || "[date]"}. NIHSS score: ${strokeCodeForm.nihss || "[score]"} and neurologic deficits are: ${strokeCodeForm.def || "[deficits]"}. Head CT: ${strokeCodeForm.hct || "[CT findings]"}. CTA Head/Neck: ${strokeCodeForm.cta || "[CTA findings]"}. CTP: ${ctp_str}${tnk_str}. TNK Treatment: ${strokeCodeForm.tnk_rec || "[recommendation]"}. EVT: ${strokeCodeForm.evt_rec || "[recommendation]"}. Rationale for Treatment Recommendation: ${strokeCodeForm.rec_reason || "[rationale]"}.`;
                          })()}
                        </p>
                      </div>
                    </div>
                  </div>
                )}

                {/* ICH */}
                {activeTab === 'ich' && (
                  <div className="space-y-6">
                    <div className="bg-red-50 border border-red-200 rounded-lg p-4">
                      <h2 className="text-xl font-semibold text-red-800 mb-4">ICH Management</h2>
                      
                      {/* Minimally Invasive Evacuation */}
                      <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                        <h3 className="text-lg font-semibold text-blue-800 mb-3">Minimally Invasive Evacuation (MIE)</h3>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                          <div className="bg-white p-3 rounded border">
                            <h4 className="font-semibold text-green-600 mb-2">ENRICH Trial Inclusion</h4>
                            <ul className="text-sm space-y-1">
                              <li>â€¢ Spontaneous supratentorial lobar ICH</li>
                              <li>â€¢ ICH onset â‰¤24 hours</li>
                              <li>â€¢ Age 18-80 years</li>
                              <li>â€¢ GCS 5-14 and NIHSS â‰¥6</li>
                              <li>â€¢ ICH volume 30-80 cc</li>
                              <li>â€¢ Pre-morbid mRS 0-1</li>
                            </ul>
                          </div>
                          
                          <div className="bg-white p-3 rounded border">
                            <h4 className="font-semibold text-red-600 mb-2">ENRICH Trial Exclusion</h4>
                            <ul className="text-sm space-y-1">
                              <li>â€¢ Coagulopathy</li>
                              <li>â€¢ IVH &gt;50% either lateral ventricle</li>
                              <li>â€¢ Thalamic/infratentorial ICH</li>
                            </ul>
                          </div>
                        </div>

                        <div className="bg-gray-100 p-3 rounded">
                          <p className="text-sm font-semibold mb-2">ICH Volume Calculation:</p>
                          <p className="text-sm"><strong>ABC/2 Method:</strong></p>
                          <ul className="text-sm ml-4">
                            <li>A = largest ICH diameter (cm)</li>
                            <li>B = largest diameter 90 degrees to A on same slice (cm)</li>
                            <li>C = (# CT slices with ICH) x (slice thickness)</li>
                          </ul>
                          <p className="text-sm mt-2 font-semibold">Volume = A x B x C / 2</p>
                        </div>
                      </div>

                      {/* Anticoagulation Reversal */}
                      <div className="mb-6">
                        <h3 className="text-lg font-semibold text-red-700 mb-4">Anticoagulation Reversal</h3>
                        
                        {/* Warfarin */}
                        <div className="bg-white p-4 rounded border mb-4">
                          <h4 className="font-semibold text-blue-700 mb-3">Warfarin</h4>
                          <ul className="text-sm space-y-1">
                            <li>â€¢ <strong>Vitamin K:</strong> 10 mg IV over 20 min</li>
                            <li>â€¢ <strong>PCC (KCentra):</strong> 2000 U IV</li>
                          </ul>
                        </div>

                        {/* Direct Oral Anticoagulants (DOACs) */}
                        <div className="bg-white p-4 rounded border mb-4">
                          <h4 className="font-semibold text-purple-700 mb-3">Direct Oral Anticoagulants (DOACs)</h4>
                          
                          <div className="mb-3">
                            <p className="text-sm font-semibold text-gray-700">Direct Factor Xa Inhibitors:</p>
                            <p className="text-sm text-gray-600 mb-2">Apixaban, Rivaroxaban, Edoxaban</p>
                            <ul className="text-sm space-y-1">
                              <li>â€¢ <strong>PCC (KCentra):</strong> 50 IU/kg (max 5000 IU)</li>
                            </ul>
                          </div>
                          
                          <div>
                            <p className="text-sm font-semibold text-gray-700">Direct Thrombin Inhibitor:</p>
                            <p className="text-sm text-gray-600 mb-2">Dabigatran</p>
                            <ul className="text-sm space-y-1">
                              <li>â€¢ <strong>Idarucizumab (Praxbind):</strong> 5g IV (2 x 2.5g)</li>
                              <li>â€¢ <strong>If unavailable:</strong> PCC (KCentra)</li>
                            </ul>
                          </div>
                        </div>

                        {/* Relative Contraindications */}
                        <div className="bg-white p-4 rounded border mb-4">
                          <h4 className="font-semibold text-gray-700 mb-3">Relative contraindications to PCC/FFP:</h4>
                          <ul className="text-sm space-y-1">
                            <li>â€¢ History of major thrombosis/thromboembolism â‰¤6 weeks</li>
                            <li>â€¢ Major surgery â‰¤6 weeks</li>
                            <li>â€¢ Known prothrombotic disorder</li>
                            <li>â€¢ IPH not considered survivable</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                )}

                {/* Trials */}
                {activeTab === 'trials' && (
                  <div className="space-y-6">
                    {/* Acute Section */}
                    <div>
                      <h2 className="text-2xl font-bold text-gray-800 mb-4">Acute</h2>
                      
                      {/* STEP-EVT */}
                      <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                        <h3 className="text-xl font-semibold text-blue-800 mb-4">STEP-EVT</h3>
                        
                        {/* Inclusion Criteria */}
                        <div className="mb-6">
                          <h4 className="text-lg font-semibold text-green-700 mb-3">Inclusion Criteria:</h4>
                          <div className="bg-white p-4 rounded border">
                            <ol className="text-sm space-y-2 list-decimal list-inside">
                              <li>Age 18 years or older</li>
                              <li>Pre-stroke modified Rankin Scale score 0-2</li>
                              <li>Within 24 hours of last known well</li>
                              <li>Has any one or more of the following presentations:
                                <ol className="ml-6 mt-2 space-y-1 list-decimal list-inside">
                                  <li>Low NIHSS Patient (must have both):
                                    <ol className="ml-6 mt-1 space-y-1 list-decimal list-inside">
                                      <li>Mild presenting neurologic deficits - NIHSS 0-5</li>
                                      <li>Occlusion of the intracranial ICA or M1 MCA</li>
                                    </ol>
                                  </li>
                                </ol>
                              </li>
                            </ol>
                          </div>
                        </div>

                        {/* Exclusion Criteria */}
                        <div>
                          <h4 className="text-lg font-semibold text-red-700 mb-3">Exclusion Criteria:</h4>
                          
                          <div className="mb-4">
                            <h5 className="font-semibold text-red-600 mb-2">Clinical</h5>
                            <div className="bg-white p-3 rounded border">
                              <ul className="text-sm space-y-1">
                                <li>Presumed septic embolus; suspicion of bacterial endocarditis</li>
                                <li>Seizure at stroke onset or between onset and enrollment</li>
                                <li>Allergy to contrast material that precludes endovascular reperfusion therapy</li>
                                <li>Intracranial occlusion suspected to be chronic, based on history and/or imaging</li>
                                <li>Intracranial dissection, based on history and/or imaging</li>
                                <li>Cerebral vasculitis, based on history and/or imaging</li>
                                <li>Known pregnancy</li>
                                <li>Known pre-existing medical, neurological or psychiatric disease that would confound the neurological or functional evaluations</li>
                                <li>Known serious, advanced, or terminal illness or life expectancy less than 6 months in the investigator judgment.</li>
                              </ul>
                            </div>
                          </div>

                          <div className="mb-4">
                            <h5 className="font-semibold text-red-600 mb-2">Laboratory</h5>
                            <div className="bg-white p-3 rounded border">
                              <ul className="text-sm space-y-1">
                                <li>Known platelet count &lt; 100,000/uL</li>
                              </ul>
                            </div>
                          </div>

                          <div>
                            <h5 className="font-semibold text-red-600 mb-2">Imaging</h5>
                            <div className="bg-white p-3 rounded border">
                              <ul className="text-sm space-y-1">
                                <li>Unfavorable vascular anatomy that limits access to the occluded artery precluding endovascular reperfusion therapy.</li>
                                <li>Acute occlusions in multiple vascular territories (e.g., bilateral anterior circulation, or anterior/posterior circulation)</li>
                                <li>Significant mass effect with midline shift (&gt;5mm)</li>
                                <li>Evidence of intra-axial tumor (except small meningioma)</li>
                                <li>Evidence of acute intracranial hemorrhage</li>
                              </ul>
                            </div>
                          </div>
                        </div>
                      </div>

                      {/* SISTER */}
                      <div className="bg-purple-50 border border-purple-200 rounded-lg p-4">
                        <h3 className="text-xl font-semibold text-purple-800 mb-4">SISTER - TS23 (mAb to Î±2-antiplasmin)</h3>
                        
                        {/* Inclusion Criteria */}
                        <div className="mb-6">
                          <h4 className="text-lg font-semibold text-green-700 mb-3">Inclusion Criteria:</h4>
                          <div className="bg-white p-4 rounded border">
                            <ul className="text-sm space-y-1">
                              <li>- Age â‰¥ 18 years</li>
                              <li>- Suspected anterior circulation acute ischemic stroke</li>
                              <li>- Presenting NIHSS â‰¥ 4 (clearly disabling if NIHSS 4â€“5)</li>
                              <li>- ASPECTS â‰¥ 6 on CT or ASPECTS â‰¥ 7 on MRI</li>
                              <li>- Perfusion imaging (CTP/PWI) showing:
                                <ul className="ml-4 mt-1 space-y-1">
                                  <li>â€¢ Mismatch ratio (penumbra:core) &gt; 1.2</li>
                                  <li>â€¢ Mismatch volume &gt; 10 cc</li>
                                  <li>â€¢ Core volume &lt; 70 cc</li>
                                </ul>
                              </li>
                              <li>- Able to receive study drug within 4.5â€“24 h of stroke onset or LKW</li>
                              <li>- Able to receive study drug within 120 minutes of qualifying perfusion imaging</li>
                              <li>- Informed consent obtained from patient or LAR</li>
                            </ul>
                          </div>
                        </div>

                        {/* Exclusion Criteria */}
                        <div>
                          <h4 className="text-lg font-semibold text-red-700 mb-3">Exclusion Criteria:</h4>
                          <div className="bg-white p-4 rounded border">
                            <ul className="text-sm space-y-1">
                              <li>- Endovascular treatment with clot engagement</li>
                              <li>- Received or planned IV thrombolysis</li>
                              <li>- Pre-stroke mRS &gt; 2</li>
                              <li>- Prior TS23 treatment or antibody allergy</li>
                              <li>- Pregnancy or breastfeeding, or positive pregnancy test</li>
                              <li>- Stroke in past 90 days</li>
                              <li>- Intracranial hemorrhage, neoplasm, SAH, or AVM</li>
                              <li>- Active intracranial neoplasm</li>
                              <li>- Clinical SAH presentation despite negative CT</li>
                              <li>- Surgery/biopsy of parenchymal organ in last 30 days</li>
                              <li>- Internal trauma or ulcerative wounds in last 30 days</li>
                              <li>- Severe head trauma in last 90 days</li>
                              <li>- Uncontrolled BP (SBP &gt; 180 or DBP &gt; 105)</li>
                              <li>- Systemic hemorrhage in last 30 days</li>
                              <li>- Hemorrhagic diathesis or INR &gt; 1.7</li>
                              <li>- Platelets &lt; 100,000/mmÂ³</li>
                              <li>- Hematocrit &lt; 25%</li>
                              <li>- Elevated aPTT above normal</li>
                              <li>- Creatinine &gt; 4 mg/dL or dialysis</li>
                              <li>- Heparin/LMWH full dose in last 24 h</li>
                              <li>- Factor Xa inhibitors in last 48 h</li>
                              <li>- Direct thrombin inhibitors in last 48 h</li>
                              <li>- GP IIb/IIIa inhibitors in last 14 days</li>
                              <li>- Neurological/psychiatric disease confounding assessments</li>
                              <li>- Participation in another drug trial</li>
                              <li>- Concurrent acute MI, PE, DVT, or other thrombotic event requiring anticoagulation</li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>

                    {/* ICH Section */}
                    <div className="mt-8">
                      <h2 className="text-2xl font-bold text-gray-800 mb-4">ICH</h2>
                      
                      {/* SATURN */}
                      <div className="bg-red-50 border border-red-200 rounded-lg p-4">
                        <h3 className="text-xl font-semibold text-red-800 mb-4">SATURN</h3>
                        
                        {/* Inclusion Criteria */}
                        <div className="mb-6">
                          <h4 className="text-lg font-semibold text-green-700 mb-3">Inclusion Criteria:</h4>
                          <div className="bg-white p-4 rounded border">
                            <ul className="text-sm space-y-1">
                              <li>- Age â‰¥ 50 years.</li>
                              <li>- Spontaneous lobar ICH confirmed by CT or MRI scan</li>
                              <li>- Patient was taking a statin drug at the onset of the qualifying/index ICH</li>
                              <li>- Randomization can be carried out within 7 days of the onset of the qualifying ICH</li>
                              <li>- Patient or legally authorized representative, after consultation with the statin prescriber, agrees to be randomized to statin continuation (restart) vs. discontinuation</li>
                            </ul>
                          </div>
                        </div>

                        {/* Exclusion Criteria */}
                        <div>
                          <h4 className="text-lg font-semibold text-red-700 mb-3">Exclusion Criteria:</h4>
                          <div className="bg-white p-4 rounded border">
                            <ul className="text-sm space-y-1">
                              <li>- Suspected secondary cause for the qualifying ICH, such as an underlying vascular abnormality or tumor, trauma, venous infarction, or hemorrhagic transformation of an ischemic infarct</li>
                              <li>- History of recent myocardial infarction (attributed to coronary artery disease) or unstable angina within the previous 3 months</li>
                              <li>- Diabetic patients with history of myocardial infarction or coronary revascularization</li>
                              <li>- History of familial hypercholesterolemia</li>
                              <li>- Patients receiving proprotein convertase subtilisin kexin 9 (PCSK9) inhibitors</li>
                              <li>- Known diagnosis of severe dementia</li>
                              <li>- Inability to obtain informed consent</li>
                              <li>- Patients known or suspected of not being able to comply with the study protocol due to alcoholism, drug dependency, or other obvious reasons for noncompliance, such as unable to adhere to the protocol specified visits/assessments</li>
                              <li>- Life expectancy of less than 24 months due to co-morbid terminal conditions</li>
                              <li>- Pre-morbid mRS &gt;3</li>
                              <li>- ICH score &gt;3 upon presentation</li>
                              <li>- Contraindications to continuation/resumption of statin therapy, such as significant elevations of serum creatinine kinase and/or liver transaminases, and rhabdomyolysis</li>
                              <li>- Woman of childbearing potential</li>
                              <li>- Concurrent participation in another research protocol for investigation of experimental therapy</li>
                              <li>- Indication that withdrawal of care will be implemented for the qualifying ICH</li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>

                    {/* Observational Section */}
                    <div className="mt-8">
                      <h2 className="text-2xl font-bold text-gray-800 mb-4">Observational</h2>
                      
                      {/* DISCOVERY */}
                      <div className="bg-amber-50 border border-amber-200 rounded-lg p-4">
                        <h3 className="text-xl font-semibold text-amber-800 mb-4">DISCOVERY</h3>
                        
                        {/* Inclusion Criteria */}
                        <div className="mb-6">
                          <h4 className="text-lg font-semibold text-green-700 mb-3">Inclusion Criteria:</h4>
                          <div className="bg-white p-4 rounded border">
                            <ul className="text-sm space-y-1">
                              <li>- Age â‰¥18 years</li>
                              <li>- Admitted to the hospital with a diagnosis of acute ischemic stroke (AIS), intracerebral hemorrhage (ICH), or aneurysmal subarachnoid hemorrhage (aSAH)</li>
                              <li>- Radiographic confirmatory evidence of: (1) AIS (based on a focal area of restricted diffusion on MRI), (2) non-traumatic ICH (based on evidence of acute parenchymal hemorrhage CT or brain MRI) or (3) non-traumatic acute aSAH (based on evidence of subarachnoid hemorrhage on CT or MRI and evidence of aneurysm on CT angiography, MR angiography, or conventional catheter-based angiography)</li>
                              <li>- Able to complete baseline visit in person or by phone within 6 weeks of stroke onset</li>
                              <li>- Able to provide informed consent by self or proxy</li>
                              <li>- Fluent in English or Spanish prior to stroke onset</li>
                            </ul>
                          </div>
                        </div>

                        {/* Exclusion Criteria */}
                        <div>
                          <h4 className="text-lg font-semibold text-red-700 mb-3">Exclusion Criteria:</h4>
                          <div className="bg-white p-4 rounded border">
                            <ul className="text-sm space-y-1">
                              <li>-Documented history of pre-stroke dementia or fails dementia pre-screen</li>
                              <li>-Concurrently enrolled into a study that is not approved under the DISCOVERY Co-Enrollment Policy</li>
                              <li>-Unable to complete study protocol (advanced directives such as comfort measures only, or inability to complete the study due to severe medical/behavioral co-morbidities), as determined by physician investigator during screening process</li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                )}

                {/* Risk Calculators */}
                {activeTab === 'calculators' && (
                  <div className="space-y-6">
                    {/* Glasgow Coma Scale */}
                    <div className="bg-gray-50 border border-gray-200 rounded-lg p-4">
                      <h3 className="text-lg font-semibold text-gray-800 mb-3">Glasgow Coma Scale (GCS)</h3>
                      
                      <div className="text-right mb-4">
                        <span className="text-2xl font-bold text-gray-600">Total Score: {calculateGCS(gcsItems)}</span>
                        <div className="text-sm text-gray-500">Range: 3-15</div>
                      </div>
                      
                      <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div className="space-y-2">
                          <h4 className="font-semibold">Eye Opening</h4>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="radio" 
                              name="gcs_eye" 
                              value="4" 
                              className="text-gray-600"
                              onChange={(e) => setGcsItems({...gcsItems, eye: e.target.value})}
                            />
                            <span className="text-sm">4 - Spontaneous</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="radio" 
                              name="gcs_eye" 
                              value="3" 
                              className="text-gray-600"
                              onChange={(e) => setGcsItems({...gcsItems, eye: e.target.value})}
                            />
                            <span className="text-sm">3 - To sound</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="radio" 
                              name="gcs_eye" 
                              value="2" 
                              className="text-gray-600"
                              onChange={(e) => setGcsItems({...gcsItems, eye: e.target.value})}
                            />
                            <span className="text-sm">2 - To pain</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="radio" 
                              name="gcs_eye" 
                              value="1" 
                              className="text-gray-600"
                              onChange={(e) => setGcsItems({...gcsItems, eye: e.target.value})}
                            />
                            <span className="text-sm">1 - None</span>
                          </label>
                        </div>
                        <div className="space-y-2">
                          <h4 className="font-semibold">Verbal Response</h4>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="radio" 
                              name="gcs_verbal" 
                              value="5" 
                              className="text-gray-600"
                              onChange={(e) => setGcsItems({...gcsItems, verbal: e.target.value})}
                            />
                            <span className="text-sm">5 - Oriented</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="radio" 
                              name="gcs_verbal" 
                              value="4" 
                              className="text-gray-600"
                              onChange={(e) => setGcsItems({...gcsItems, verbal: e.target.value})}
                            />
                            <span className="text-sm">4 - Confused</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="radio" 
                              name="gcs_verbal" 
                              value="3" 
                              className="text-gray-600"
                              onChange={(e) => setGcsItems({...gcsItems, verbal: e.target.value})}
                            />
                            <span className="text-sm">3 - Inappropriate</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="radio" 
                              name="gcs_verbal" 
                              value="2" 
                              className="text-gray-600"
                              onChange={(e) => setGcsItems({...gcsItems, verbal: e.target.value})}
                            />
                            <span className="text-sm">2 - Incomprehensible</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="radio" 
                              name="gcs_verbal" 
                              value="1" 
                              className="text-gray-600"
                              onChange={(e) => setGcsItems({...gcsItems, verbal: e.target.value})}
                            />
                            <span className="text-sm">1 - None</span>
                          </label>
                        </div>
                        <div className="space-y-2">
                          <h4 className="font-semibold">Motor Response</h4>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="radio" 
                              name="gcs_motor" 
                              value="6" 
                              className="text-gray-600"
                              onChange={(e) => setGcsItems({...gcsItems, motor: e.target.value})}
                            />
                            <span className="text-sm">6 - Obeying</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="radio" 
                              name="gcs_motor" 
                              value="5" 
                              className="text-gray-600"
                              onChange={(e) => setGcsItems({...gcsItems, motor: e.target.value})}
                            />
                            <span className="text-sm">5 - Localizing</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="radio" 
                              name="gcs_motor" 
                              value="4" 
                              className="text-gray-600"
                              onChange={(e) => setGcsItems({...gcsItems, motor: e.target.value})}
                            />
                            <span className="text-sm">4 - Flexing</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="radio" 
                              name="gcs_motor" 
                              value="3" 
                              className="text-gray-600"
                              onChange={(e) => setGcsItems({...gcsItems, motor: e.target.value})}
                            />
                            <span className="text-sm">3 - Abnormal flexion</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="radio" 
                              name="gcs_motor" 
                              value="2" 
                              className="text-gray-600"
                              onChange={(e) => setGcsItems({...gcsItems, motor: e.target.value})}
                            />
                            <span className="text-sm">2 - Extending</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="radio" 
                              name="gcs_motor" 
                              value="1" 
                              className="text-gray-600"
                              onChange={(e) => setGcsItems({...gcsItems, motor: e.target.value})}
                            />
                            <span className="text-sm">1 - None</span>
                          </label>
                        </div>
                      </div>
                    </div>

                    {/* ICH Score */}
                    <div className="bg-red-50 border border-red-200 rounded-lg p-4">
                      <h3 className="text-lg font-semibold text-red-800 mb-3">ICH Score</h3>
                      
                      <div className="text-right mb-4">
                        <span className="text-2xl font-bold text-red-600">Total Score: {calculateICHScore(ichScoreItems)}</span>
                      </div>
                      
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div className="space-y-2">
                          <label className="flex items-center space-x-2">
                            <input 
                              type="checkbox" 
                              className="text-red-600"
                              checked={ichScoreItems.gcs34}
                              onChange={(e) => setIchScoreItems({...ichScoreItems, gcs34: e.target.checked})}
                            />
                            <span className="text-sm">GCS 3-4 (+2)</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="checkbox" 
                              className="text-red-600"
                              checked={ichScoreItems.gcs512}
                              onChange={(e) => setIchScoreItems({...ichScoreItems, gcs512: e.target.checked})}
                            />
                            <span className="text-sm">GCS 5-12 (+1)</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="checkbox" 
                              className="text-red-600"
                              checked={ichScoreItems.age80}
                              onChange={(e) => setIchScoreItems({...ichScoreItems, age80: e.target.checked})}
                            />
                            <span className="text-sm">Age â‰¥80 (+1)</span>
                          </label>
                        </div>
                        <div className="space-y-2">
                          <label className="flex items-center space-x-2">
                            <input 
                              type="checkbox" 
                              className="text-red-600"
                              checked={ichScoreItems.volume30}
                              onChange={(e) => setIchScoreItems({...ichScoreItems, volume30: e.target.checked})}
                            />
                            <span className="text-sm">ICH volume â‰¥30 cc (+1)</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="checkbox" 
                              className="text-red-600"
                              checked={ichScoreItems.ivh}
                              onChange={(e) => setIchScoreItems({...ichScoreItems, ivh: e.target.checked})}
                            />
                            <span className="text-sm">Intraventricular hemorrhage (+1)</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="checkbox" 
                              className="text-red-600"
                              checked={ichScoreItems.infratentorial}
                              onChange={(e) => setIchScoreItems({...ichScoreItems, infratentorial: e.target.checked})}
                            />
                            <span className="text-sm">Infratentorial origin (+1)</span>
                          </label>
                        </div>
                      </div>
                    </div>

                    {/* ABCD2 */}
                    <div className="bg-orange-50 border border-orange-200 rounded-lg p-4">
                      <h3 className="text-lg font-semibold text-orange-800 mb-3">ABCDÂ² Score</h3>
                      
                      <div className="text-right mb-4">
                        <span className="text-2xl font-bold text-orange-600">Total Score: {calculateABCD2Score(abcd2Items)}</span>
                      </div>
                      
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div className="space-y-2">
                          <label className="flex items-center space-x-2">
                            <input 
                              type="checkbox" 
                              className="text-orange-600"
                              checked={abcd2Items.age60}
                              onChange={(e) => setAbcd2Items({...abcd2Items, age60: e.target.checked})}
                            />
                            <span className="text-sm">Age â‰¥60 (+1)</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="checkbox" 
                              className="text-orange-600"
                              checked={abcd2Items.bp}
                              onChange={(e) => setAbcd2Items({...abcd2Items, bp: e.target.checked})}
                            />
                            <span className="text-sm">BP: SBPâ‰¥140 or DBPâ‰¥90 (+1)</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="checkbox" 
                              className="text-orange-600"
                              checked={abcd2Items.unilateralWeakness}
                              onChange={(e) => setAbcd2Items({...abcd2Items, unilateralWeakness: e.target.checked})}
                            />
                            <span className="text-sm">Unilateral weakness (+2)</span>
                          </label>
                        </div>
                        <div className="space-y-2">
                          <label className="flex items-center space-x-2">
                            <input 
                              type="checkbox" 
                              className="text-orange-600"
                              checked={abcd2Items.speechDisturbance}
                              onChange={(e) => setAbcd2Items({...abcd2Items, speechDisturbance: e.target.checked})}
                            />
                            <span className="text-sm">Speech disturbance w/o weakness (+1)</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="checkbox" 
                              className="text-orange-600"
                              checked={abcd2Items.duration60}
                              onChange={(e) => setAbcd2Items({...abcd2Items, duration60: e.target.checked})}
                            />
                            <span className="text-sm">Duration â‰¥60 min (+2)</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="checkbox" 
                              className="text-orange-600"
                              checked={abcd2Items.diabetes}
                              onChange={(e) => setAbcd2Items({...abcd2Items, diabetes: e.target.checked})}
                            />
                            <span className="text-sm">Diabetes mellitus (+1)</span>
                          </label>
                        </div>
                      </div>

                      <div className="bg-white p-3 rounded border">
                        <h4 className="font-semibold mb-2">2-Day, 7-Day, and 90-Day Stroke Risk</h4>
                        <div className="grid grid-cols-3 gap-4 text-sm">
                          <div>
                            <p><strong>0-3:</strong></p>
                            <p>2-day: 1%</p>
                            <p>7-day: 1.2%</p>
                            <p>90-day: 3.1%</p>
                          </div>
                          <div>
                            <p><strong>4-5:</strong></p>
                            <p>2-day: 4.1%</p>
                            <p>7-day: 5.9%</p>
                            <p>90-day: 9.8%</p>
                          </div>
                          <div>
                            <p><strong>6-7:</strong></p>
                            <p>2-day: 8.1%</p>
                            <p>7-day: 11.7%</p>
                            <p>90-day: 17.8%</p>
                          </div>
                        </div>
                      </div>
                    </div>

                    {/* CHADS2-VASC */}
                    <div className="bg-purple-50 border border-purple-200 rounded-lg p-4">
                      <h3 className="text-lg font-semibold text-purple-800 mb-3">CHADSâ‚‚-VASc Score</h3>
                      
                      <div className="text-right mb-4">
                        <span className="text-2xl font-bold text-purple-600">Total Score: {calculateCHADS2VascScore(chads2vascItems)}</span>
                      </div>
                      
                      <div className="grid grid-cols-2 md:grid-cols-3 gap-4 mb-4">
                        <label className="flex items-center space-x-2">
                          <input 
                            type="checkbox" 
                            className="text-purple-600"
                            checked={chads2vascItems.age65}
                            onChange={(e) => setChads2vascItems({...chads2vascItems, age65: e.target.checked})}
                          />
                          <span className="text-sm">Age 65-74 (+1)</span>
                        </label>
                        <label className="flex items-center space-x-2">
                          <input 
                            type="checkbox" 
                            className="text-purple-600"
                            checked={chads2vascItems.age75}
                            onChange={(e) => setChads2vascItems({...chads2vascItems, age75: e.target.checked})}
                          />
                          <span className="text-sm">Age â‰¥75 (+2)</span>
                        </label>
                        <label className="flex items-center space-x-2">
                          <input 
                            type="checkbox" 
                            className="text-purple-600"
                            checked={chads2vascItems.chf}
                            onChange={(e) => setChads2vascItems({...chads2vascItems, chf: e.target.checked})}
                          />
                          <span className="text-sm">CHF (+1)</span>
                        </label>
                        <label className="flex items-center space-x-2">
                          <input 
                            type="checkbox" 
                            className="text-purple-600"
                            checked={chads2vascItems.hypertension}
                            onChange={(e) => setChads2vascItems({...chads2vascItems, hypertension: e.target.checked})}
                          />
                          <span className="text-sm">Hypertension (+1)</span>
                        </label>
                        <label className="flex items-center space-x-2">
                          <input 
                            type="checkbox" 
                            className="text-purple-600"
                            checked={chads2vascItems.diabetes}
                            onChange={(e) => setChads2vascItems({...chads2vascItems, diabetes: e.target.checked})}
                          />
                          <span className="text-sm">Diabetes (+1)</span>
                        </label>
                        <label className="flex items-center space-x-2">
                          <input 
                            type="checkbox" 
                            className="text-purple-600"
                            checked={chads2vascItems.strokeTia}
                            onChange={(e) => setChads2vascItems({...chads2vascItems, strokeTia: e.target.checked})}
                          />
                          <span className="text-sm">Stroke/TIA (+2)</span>
                        </label>
                        <label className="flex items-center space-x-2">
                          <input 
                            type="checkbox" 
                            className="text-purple-600"
                            checked={chads2vascItems.vascular}
                            onChange={(e) => setChads2vascItems({...chads2vascItems, vascular: e.target.checked})}
                          />
                          <span className="text-sm">Vascular disease (+1)</span>
                        </label>
                        <label className="flex items-center space-x-2">
                          <input 
                            type="checkbox" 
                            className="text-purple-600"
                            checked={chads2vascItems.female}
                            onChange={(e) => setChads2vascItems({...chads2vascItems, female: e.target.checked})}
                          />
                          <span className="text-sm">Female sex (+1)</span>
                        </label>
                      </div>
                      
                      <div className="bg-white p-3 rounded border">
                        <h4 className="font-semibold mb-2">Annual Stroke and Thromboembolism Risk</h4>
                        <div className="grid grid-cols-3 gap-4 text-sm">
                          <div>
                            <p><strong>Score 0:</strong> 0.8%</p>
                            <p><strong>Score 1:</strong> 2.0%</p>
                            <p><strong>Score 2:</strong> 3.7%</p>
                          </div>
                          <div>
                            <p><strong>Score 3:</strong> 5.9%</p>
                            <p><strong>Score 4:</strong> 9.3%</p>
                            <p><strong>Score 5:</strong> 15.3%</p>
                          </div>
                          <div>
                            <p><strong>Score 6:</strong> 19.7%</p>
                            <p><strong>Score 7:</strong> 21.5%</p>
                            <p><strong>Score 8:</strong> 22.4%</p>
                            <p><strong>Score 9:</strong> 23.6%</p>
                          </div>
                        </div>
                      </div>
                    </div>

                    {/* ROPE Score */}
                    <div className="bg-teal-50 border border-teal-200 rounded-lg p-4">
                      <h3 className="text-lg font-semibold text-teal-800 mb-3">ROPE Score</h3>
                      
                      <div className="text-right mb-4">
                        <span className="text-2xl font-bold text-teal-600">Total Score: {calculateROPEScore(ropeItems)}</span>
                      </div>
                      
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div className="space-y-2">
                          <label className="flex items-center space-x-2">
                            <input 
                              type="checkbox" 
                              className="text-teal-600"
                              checked={ropeItems.noHypertension}
                              onChange={(e) => setRopeItems({...ropeItems, noHypertension: e.target.checked})}
                            />
                            <span className="text-sm">No history of hypertension (+1)</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="checkbox" 
                              className="text-teal-600"
                              checked={ropeItems.noDiabetes}
                              onChange={(e) => setRopeItems({...ropeItems, noDiabetes: e.target.checked})}
                            />
                            <span className="text-sm">No history of diabetes (+1)</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="checkbox" 
                              className="text-teal-600"
                              checked={ropeItems.noStrokeTia}
                              onChange={(e) => setRopeItems({...ropeItems, noStrokeTia: e.target.checked})}
                            />
                            <span className="text-sm">No history of stroke or TIA (+1)</span>
                          </label>
                        </div>
                        <div className="space-y-2">
                          <label className="flex items-center space-x-2">
                            <input 
                              type="checkbox" 
                              className="text-teal-600"
                              checked={ropeItems.nonsmoker}
                              onChange={(e) => setRopeItems({...ropeItems, nonsmoker: e.target.checked})}
                            />
                            <span className="text-sm">Nonsmoker (+1)</span>
                          </label>
                          <label className="flex items-center space-x-2">
                            <input 
                              type="checkbox" 
                              className="text-teal-600"
                              checked={ropeItems.cortical}
                              onChange={(e) => setRopeItems({...ropeItems, cortical: e.target.checked})}
                            />
                            <span className="text-sm">Cortical infarct (+1)</span>
                          </label>
                          <div>
                            <label className="block text-sm font-medium text-gray-700 mb-1">Age (years)</label>
                            <input 
                              type="number"
                              className="w-full px-3 py-1 border border-gray-300 rounded-md text-sm"
                              value={ropeItems.age}
                              onChange={(e) => setRopeItems({...ropeItems, age: e.target.value})}
                              placeholder="Enter age"
                              min="18"
                              max="100"
                            />
                            <div className="text-xs text-gray-500 mt-1">
                              18-29: +5, 30-39: +4, 40-49: +3, 50-59: +2, 60-69: +1, â‰¥70: 0
                            </div>
                          </div>
                        </div>
                      </div>
                      
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div className="bg-white p-3 rounded border">
                          <h4 className="font-semibold mb-2">PFO-attributable fraction</h4>
                          <div className="text-sm">
                            <p className={calculateROPEScore(ropeItems) <= 3 ? "font-bold text-teal-600" : ""}><strong>Score 0-3:</strong> 0-23%</p>
                            <p className={calculateROPEScore(ropeItems) === 4 ? "font-bold text-teal-600" : ""}><strong>Score 4:</strong> 38%</p>
                            <p className={calculateROPEScore(ropeItems) === 5 ? "font-bold text-teal-600" : ""}><strong>Score 5:</strong> 34%</p>
                            <p className={calculateROPEScore(ropeItems) === 6 ? "font-bold text-teal-600" : ""}><strong>Score 6:</strong> 62%</p>
                            <p className={calculateROPEScore(ropeItems) === 7 ? "font-bold text-teal-600" : ""}><strong>Score 7:</strong> 72%</p>
                            <p className={calculateROPEScore(ropeItems) === 8 ? "font-bold text-teal-600" : ""}><strong>Score 8:</strong> 84%</p>
                            <p className={calculateROPEScore(ropeItems) >= 9 ? "font-bold text-teal-600" : ""}><strong>Score 9-10:</strong> 88%</p>
                          </div>
                        </div>
                        <div className="bg-white p-3 rounded border">
                          <h4 className="font-semibold mb-2">2-Year Recurrent Stroke/TIA Risk</h4>
                          <div className="text-sm">
                            <p className={calculateROPEScore(ropeItems) <= 3 ? "font-bold text-teal-600" : ""}><strong>Score 0-3:</strong> 20%</p>
                            <p className={calculateROPEScore(ropeItems) === 4 ? "font-bold text-teal-600" : ""}><strong>Score 4:</strong> 12%</p>
                            <p className={calculateROPEScore(ropeItems) === 5 ? "font-bold text-teal-600" : ""}><strong>Score 5:</strong> 15%</p>
                            <p className={calculateROPEScore(ropeItems) === 6 ? "font-bold text-teal-600" : ""}><strong>Score 6:</strong> 8%</p>
                            <p className={calculateROPEScore(ropeItems) === 7 ? "font-bold text-teal-600" : ""}><strong>Score 7:</strong> 6%</p>
                            <p className={calculateROPEScore(ropeItems) === 8 ? "font-bold text-teal-600" : ""}><strong>Score 8:</strong> 6%</p>
                            <p className={calculateROPEScore(ropeItems) >= 9 ? "font-bold text-teal-600" : ""}><strong>Score 9-10:</strong> 2%</p>
                          </div>
                        </div>
                      </div>
                    </div>

                    {/* PASCAL Classification */}
                    <div className="bg-indigo-50 border border-indigo-200 rounded-lg p-4">
                      <h3 className="text-lg font-semibold text-indigo-800 mb-3">PASCAL Classification</h3>
                      
                      <div className="space-y-4">
                        <div className="bg-white p-3 rounded border">
                          <h4 className="font-semibold text-green-700 mb-2">Probable PFO-related stroke:</h4>
                          <p className="text-sm">RoPE â‰¥7 + high-grade shunt / ASA</p>
                        </div>
                        
                        <div className="bg-white p-3 rounded border">
                          <h4 className="font-semibold text-amber-700 mb-2">Possible PFO-related stroke:</h4>
                          <ul className="text-sm space-y-1">
                            <li>â€¢ RoPE &lt;7 + high-grade shunt / ASA</li>
                            <li>â€¢ RoPE â‰¥7 but no high-grade shunt / ASA</li>
                          </ul>
                        </div>
                        
                        <div className="bg-white p-3 rounded border">
                          <h4 className="font-semibold text-red-700 mb-2">Unlikely PFO-related stroke:</h4>
                          <p className="text-sm">RoPE &lt;7, no high-grade shunt / ASA</p>
                        </div>
                      </div>
                    </div>

                    {/* PREVENT 10-year ASCVD Risk */}
                    <div className="bg-rose-50 border border-rose-200 rounded-lg p-4">
                      <h3 className="text-lg font-semibold text-rose-800 mb-3">PREVENT 10-year ASCVD Risk Estimate</h3>
                      <div className="bg-white p-4 rounded border">
                        <a 
                          href="https://professional.heart.org/en/guidelines-and-statements/prevent-calculator" 
                          target="_blank" 
                          rel="noopener noreferrer"
                          className="inline-flex items-center px-4 py-2 bg-rose-600 text-white rounded-md hover:bg-rose-700 transition-colors text-sm font-medium"
                        >
                          Open PREVENT Calculator â†’
                        </a>
                      </div>
                    </div>


                  </div>
                )}

                {/* Management */}
                {activeTab === 'protocols' && (
                  <div className="space-y-6">
                    {/* Blood Pressure Management */}
                    <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
                      <h3 className="text-lg font-semibold text-blue-800 mb-3">Blood Pressure Management</h3>
                      
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div className="bg-white p-3 rounded border">
                          <h4 className="font-semibold text-green-700 mb-2">BP Goals</h4>
                          <ul className="text-sm space-y-1">
                            <li><strong>Ischemic stroke:</strong> SBP &lt;220, DBP &lt;120</li>
                            <li><strong>Before lytics:</strong> SBP &lt;185, DBP &lt;110</li>
                            <li><strong>After lytics:</strong> SBP &lt;180, DBP &lt;105</li>
                            <li><strong>After thrombectomy:</strong> SBP &lt;180, DBP &lt;105</li>
                            <li><strong>ICH:</strong> SBP &lt;160, DBP &lt;105</li>
                          </ul>
                        </div>
                        <div className="bg-white p-3 rounded border">
                          <h4 className="font-semibold text-blue-700 mb-2">Acute Treatment</h4>
                          <ul className="text-sm space-y-1">
                            <li><strong>Labetalol:</strong> 10 mg IV q15min</li>
                            <li>Increase to 20mg, then 40mg, then 60mg</li>
                            <li>Max total dose: 300mg in 2 hours</li>
                            <li><strong>Alternative:</strong> Nicardipine 5 mg/hr IV</li>
                            <li>Titrate by 2.5 mg/hr q15min</li>
                          </ul>
                        </div>
                      </div>
                    </div>

                    {/* Post-Lytic Complications */}
                    <div className="bg-red-50 border border-red-200 rounded-lg p-4">
                      <h3 className="text-lg font-semibold text-red-800 mb-3">Post-Lytic ICH Protocol</h3>

                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div className="bg-white p-3 rounded border">
                          <h4 className="font-semibold mb-2">Immediate Actions</h4>
                          <ol className="text-sm space-y-1 list-decimal list-inside">
                            <li>STAT non-contrast CT head</li>
                            <li>Emergency hemorrhage panel</li>
                            <li>Type & cross</li>
                            <li>Notify patient's family</li>
                          </ol>
                        </div>
                        <div className="bg-white p-3 rounded border">
                          <h4 className="font-semibold mb-2">Reversal Agents</h4>
                          <ul className="text-sm space-y-1">
                            <li><strong>Cryoprecipitate:</strong> 2 pools over 10-30 min</li>
                            <li><strong>Tranexamic acid:</strong> 1g IV infused over 10 minutes</li>
                          </ul>
                        </div>
                      </div>
                    </div>

                    {/* Angioedema Protocol */}
                    <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                      <h3 className="text-lg font-semibold text-yellow-800 mb-3">Orolingual Angioedema Protocol</h3>
                      
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div className="bg-white p-3 rounded border">
                          <h4 className="font-semibold mb-2">Assessment</h4>
                          <ul className="text-sm space-y-1">
                            <li>â€¢ Maintain airway</li>
                            <li>â€¢ Hold ACE inhibitors</li>
                            <li>â€¢ Consider intubation if severe</li>
                          </ul>
                        </div>
                        <div className="bg-white p-3 rounded border">
                          <h4 className="font-semibold mb-2">Treatment</h4>
                          <ul className="text-sm space-y-1">
                            <li><strong>Methylprednisolone:</strong> 125 mg IV</li>
                            <li><strong>Diphenhydramine:</strong> 50 mg IV</li>
                            <li><strong>Famotidine:</strong> 20 mg IV</li>
                            <li><strong>Epinephrine:</strong> 0.1% if severe</li>
                            <li><strong>Consider Berinert:</strong> 20 IU/kg (C1 esterase inhibitor)</li>
                            <li><strong>Supportive Care</strong></li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                )}
              </div>
            </div>
          );
        };

        // Render the component
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<StrokeClinicalTool />);
        
        // Initialize Lucide icons
        lucide.createIcons();
    </script>
</body>
</html>
